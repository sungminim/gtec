!function () { for (var e, t = function () { }, n = ["assert", "clear", "count", "debug", "dir", "dirxml", "error", "exception", "group", "groupCollapsed", "groupEnd", "info", "log", "markTimeline", "profile", "profileEnd", "table", "time", "timeEnd", "timeline", "timelineEnd", "timeStamp", "trace", "warn"], i = n.length, a = window.console = window.console || {}; i--;)a[e = n[i]] || (a[e] = t) }(), Object.keys || (Object.keys = function () { "use strict"; var e = Object.prototype.hasOwnProperty, t = !{ toString: null }.propertyIsEnumerable("toString"), n = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"], i = n.length; return function (a) { if ("function" != typeof a && ("object" != typeof a || null === a)) throw new TypeError("Object.keys called on non-object"); var o, s, r = []; for (o in a) e.call(a, o) && r.push(o); if (t) for (s = 0; s < i; s++)e.call(a, n[s]) && r.push(n[s]); return r } }()), function (e) { e.cookie = function (t, n, i) { if (arguments.length > 1 && (!/Object/.test(Object.prototype.toString.call(n)) || null === n || void 0 === n)) { if (i = e.extend({}, i), null !== n && void 0 !== n || (i.expires = -1), "number" == typeof i.expires) { var a = i.expires, o = i.expires = new Date; o.setDate(o.getDate() + a) } return n = String(n), document.cookie = [encodeURIComponent(t), "=", i.raw ? n : encodeURIComponent(n), i.expires ? "; expires=" + i.expires.toUTCString() : "", i.path ? "; path=" + i.path : "", i.domain ? "; domain=" + i.domain : "", i.secure ? "; secure" : ""].join("") } for (var s, r = (i = n || {}).raw ? function (e) { return e } : decodeURIComponent, l = document.cookie.split("; "), d = 0; s = l[d] && l[d].split("="); d++)if (r(s[0]) === t) return r(s[1] || ""); return null } }(jQuery); var dots = function () { function e(e) { return function (e) { return "undefined" != typeof jQuery && e instanceof jQuery }(e) ? jQuery(e).get() : function (e) { return "object" == typeof HTMLElement ? e instanceof HTMLElement : e && "object" == typeof e && null !== e && 1 === e.nodeType && "string" == typeof e.nodeName }(e) ? e : document.querySelectorAll(e) } return { add: function (t, n) { for (var i = e(t), a = 0, o = i.length; a < o; a++)!function (e, t) { for (var n = e.innerHTML.split(" "), i = []; e.scrollHeight > e.offsetHeight;)i.push(n.pop()), e.innerHTML = n.join(" ") + '<div class="__dots__" style="display:inline">' + (t || "...") + '</div> <div class="__rest__" style="display:none">' + i.join(" ") + "</div>" }(i[a], n) }, remove: function (t) { for (var n = e(t), i = 0, a = n.length; i < a; i++)!function (e) { var t = e.querySelector(".__rest__"), n = ""; t && (n = t.innerHTML, e.removeChild(e.querySelector(".__dots__")), e.removeChild(t), e.innerHTML = e.innerHTML + n) }(n[i]) } } }(); !function (e) { var t = window.uxlib = {}; t.applyFilter = function (e, t) { return t ? e.filter(t) : e }, t.elEventCall = function (t, n) { var i = arguments.length > 2 ? [].concat(t, [].slice.call(arguments, 2)) : [t]; return e(t).length > 0 && n ? n.apply(null, i) : {} }, t.trigger = function (n) { var i = e(n), a = n.match(/[^.]+/), o = (a && a[0]) + "--on", s = { on: function (e) { return t.applyFilter(i, e).addClass(o) }, off: function (e) { return t.applyFilter(i, e).removeClass(o) }, onSel: o, $el: function (e) { return t.applyFilter(i, e) }, toggle: function (e) { return (s.hasOnClass(e) ? s.off : s.on)(e) }, hasOnClass: function (e, n) { var a = n || o; return t.applyFilter(i, e).hasClass(a) } }; return s }, t.windowScroll = function (t) { var n = e("body"), i = e(window); return { block: function () { i.on("DOMMouseScroll.scrolldisable mousewheel.scrolldisable", function (e) { e.stopPropagation(), e.stopImmediatePropagation(), e.preventDefault() }) }, unBlock: function () { i.off(".scrolldisable"), n.off(".scrolldisable").removeAttr("style") } } } }(jQuery), function (e, t, n) { var i = e(window), a = window.uxui = {}; a.fixedEventHandler = function (e) { var t = n.trigger(e), a = parseInt(t.$el().css("paddingTop")), o = !1; i.on("scroll.fixedEvent", function () { var e = i.scrollTop() >= a; e && !o ? (t.on(), o = !0) : !e && o && (t.off(), o = !1) }).trigger("scroll.fixedEvent") }, a.dropBoxEventHandler = function (t) { function n() { a.play(), o = !0 } function i() { a.tweenTo(0, { ease: Power2.easeOut }), o = !1 } var a = new TimelineMax({ paused: !0 }).fromTo(t + "-cont", .35, { display: "none", marginTop: -19, height: 0 }, { opacity: 1, marginTop: 0, height: 70, display: "block", ease: Power1.easeOut }), o = !1; e(t).on("mouseenter", function (e) { n() }).on("mouseleave", function (e) { i() }).on("click", function (e) { (o ? n : i)() }) }, a.allMenuEventHandler = function (t) { var i = t + "-cont", a = t + "-open", o = t + "-close", s = n.trigger(i), r = n.windowScroll(window), l = s.$el(), d = l.find(".all-menu-content-body"), c = new TimelineMax({ paused: !0 }).fromTo(i, .45, { display: "none", height: 0 }, { display: "block", height: "100%", ease: Power2.easeOut }, 0).set(d, { height: "auto" }, .01).from(d, .45, { height: 0, ease: Power1.easeOut }, .01).fromTo(l.find(".all-menu-content-bottom"), .3, { opacity: 0 }, { opacity: 1 }, .1).addLabel("open").staggerFromTo(l.find(".menu-list"), .35, { y: 25, opacity: 0 }, { y: 0, opacity: 1, ease: Power3.easeInOut }, .06, 0), u = c, p = e(a + "," + o), f = (p.find(".line01").get(), p.find(".line02").get(), p.find(".line03").get(), new TimelineMax({ paused: !0 }).to(".line01", .35, { top: 12, ease: Power2.easeOut }, 0).to(".line02", .35, { transformOrigin: "top right", right: 15, width: 0, ease: Power2.easeOut }, 0).to(".line03", .35, { bottom: 12, ease: Power2.easeOut }, 0).to(".line01", .35, { rotation: -45, ease: Power2.easeOut }, .4).to(".line03", .35, { rotation: 45, ease: Power2.easeOut }, .4)); e(a).on("click", function (e) { if (u.isActive()) return !1; s.on(), e.preventDefault(), r.block(), u = c.tweenTo(c.totalDuration()), f.play() }), e(o).on("click", function (e) { if (u.isActive()) return !1; s.off(), e.preventDefault(), r.unBlock(), u = c.tweenFromTo("open", 0, { ease: Power1.easeOut }), f.tweenTo(0, { ease: Power2.easeOut }) }) }, a.searchBoxEventHandler = function (t) { var a, o = t + "-open", s = t + "-input", r = n.trigger(t); e(o).on("click", function (t) { var n = i.scrollTop(); r.on(), t.preventDefault(), window.setTimeout(function () { n === i.scrollTop() ? e(s).trigger("focus.sb") : e(s).trigger("blur.sb") }, 650) }), e(s).on("focus.sb", function () { clearTimeout(a) }).on("blur.sb", function () { a = window.setTimeout(r.off, 5e3) }) }, a.faqFlipEventHandler = function (i) { var a = (i + "--on").replace(".", ""); n.trigger(i), n.windowScroll(window); e(document).on("click", i + " .btn-shape01-color01", function (e) { e.stopPropagation() }), e(document).on("click", i, function (n) { n.preventDefault(); var o = e(this), s = o.offset().top - 100; if (e(i).is(".transition_playing")) return !1; e(this).hasClass(a) ? e(i).removeClass(a) : (e(i).removeClass(a), e(this).addClass(a), e(this).find(".faq-a-btn-block a").focus(), e(window).scrollTop() > s && t.to(window, .4, { scrollTo: s })), window.setTimeout(function () { o.removeClass("transition_playing") }, 550), e(this).addClass("transition_playing") }) }, a.toggleEventHandler = function (t) { var i = t + "-open", a = t + "-close", o = n.trigger(t); e(i).off("click.toggleEventHandler").on("click.toggleEventHandler", function (n) { n.preventDefault(); var i = e(this).closest(t); o.on(i), o.$el().find(a).focus() }), e(a).off("click.toggleEventHandler").on("click.toggleEventHandler", function (n) { n.preventDefault(); var a = e(this).closest(t); o.off(a), o.$el().find(i).focus() }) }, a.familyBoxEventHandler = function (t) { var i = n.trigger(t), a = i.$el(); e(document).on("click.familybox", function (e) { 0 === a.find(e.target).length && i.off() }), e(t + ">a").on("click", function (e) { e.preventDefault(), i.hasOnClass() ? i.off() : i.on() }) }, a.ticketAccordionEventHandler = function (t) { var i = t + "-cont", a = t + "-innercont", o = t + "-close", s = t + "-open", r = n.trigger(t); r.$el().each(function () { var t = e(this), n = new TimelineMax({ paused: !0 }).set(t.find(i), { display: "block" }, .001).to(t.find(a), .5, { display: "block", autoAlpha: 1 }, .001).to(t.find(i), .6, { display: "block", height: t.find(a).outerHeight(), ease: Power2.easeOut }, .001).set(t.find(" .ico-plus"), { className: "+=ico-plus--minus" }, .3); t.find(s).on("click", function (e) { e.preventDefault(), r.on(t), n.play() }), t.find(o).on("click", function (e) { e.preventDefault(), r.off(t), n.tweenTo(0, { ease: Power2.easeOut }) }) }) }, a.ticketQnaEventHandler = function (t) { var i = t + "-toggle", a = t + "-cont", o = n.trigger(t); e(t).each(function () { var t = e(this), n = t.find(a), s = new TimelineMax({ paused: !0 }).set(n, { height: 0, paddingBottom: 0, display: "none" }, 0).set(n, { display: "block", height: "auto", paddingBottom: 37 }, 0).from(n, .35, { height: 0, paddingBottom: 0, ease: Power1.easeOut }, 0), r = s; t.find(i).on("click", function (e) { if (e.preventDefault(), r.isActive()) return !1; o.hasOnClass(t) ? (r = s.tweenTo(0, { ease: Power2.easeOut }), o.off(t)) : (r = s.play(), o.on(t)) }) }) }, a.infoEventHandler = function (i) { var a = i + "-open", o = i + "-close", s = i + "-cont", r = n.trigger(i); e([a, ",", o].join("")).on("click", function (n) { n.preventDefault(), r.hasOnClass() ? (r.off(), t.to(a, .3, { rotation: 0, ease: Power2.easeOut }), e(s).fadeOut(300)) : (r.on(), t.to(a, .45, { rotation: 180, ease: Back.easeOut }), e(s).fadeIn(300)) }) }, a.ie9Require = function (t) { n.trigger(t + " input[required]").$el().on("focus", function () { e(this).next("label").fadeOut(200) }).on("blur", function () { var t = e(this).next("label"); e(this).val() || t.fadeIn(200) }) }, a.scrollHook = function (n) { e(document).on("mousewheel", n, function (i) { i.preventDefault(); var a = e(this).find(n + "-cont").get(0) || this, o = 100 * -i.deltaY; t.to(a, .4, { scrollTo: e(a).scrollTop() + o, ease: Power2.easeOut }) }) }, a.pinterest = function (n) { var i = 0, a = n + "-item", o = { itemSelector: a, columnWidth: 295, horizontalOrder: !0 }, s = new Masonry(n, o), r = function (e) { t.staggerFromTo(e, .7, { y: 30 }, { y: 0, autoAlpha: 1, ease: Power2.easeOut }, .15) }, l = function (e) { var t = document.querySelectorAll(a), l = [].slice.call(t, i); e = e || function () { }, window.imagesLoaded ? window.imagesLoaded(l, function () { s = new Masonry(n, o), r(l), i = t.length - 1, e(l) }) : window.setTimeout(function (a) { s = new Masonry(n, o), r(l), i = t.length - 1, e(l) }, 100) }; return e(window).on("load", function () { l() }), { pinterestLoad: l } }, a.drawSvgSub = function () { var t = !1; !function () { var n = e(".ui_svg-sub"), a = n.find(".svg-sub-lm"), o = new TimelineMax({ paused: !0 }); o.clear().addPause(2).set(n, { display: "block" }, .001).fromTo(".ui_svg-sub .svg-sub-lm", 1.8, { drawSVG: 0 }, { drawSVG: "100%", ease: Power0.easeNone }).fromTo(".ui_svg-sub .svg-sub-o1", .4, { drawSVG: "75% 75%" }, { drawSVG: "75% 100%", ease: Power0.easeNone }).fromTo(".ui_svg-sub .svg-sub-o2", .4, { drawSVG: "75% 75%" }, { drawSVG: "0% 75%", ease: Power0.easeNone }, "-=0.4").fromTo(".ui_svg-sub .svg-sub-a", .3, { drawSVG: "100% 100%" }, { drawSVG: "100% 0%", ease: Power0.easeNone }).timeScale(1).addPause(1), o.tweenTo(o.totalDuration(), { ease: Power1.easeOut }), e(window).on("resize.svgResize", function () { var t = n.get(0).getAttribute("viewBox"), i = e(this).width() - n.get(0).getBoundingClientRect().left; t = t.replace(/^([\d.]+\s[\d.]+\s)[\d.]+(\s[\d.]+)/, function (e, t, n) { return t + i + n }), a.attr("d", a.attr("d").replace(/^M\s?[\d.]+/i, function () { return "M" + i })), n.css("width", i), n.get(0).setAttribute("viewBox", t) }), i.on("load.svgResize", function () { t || (t = !0, e(window).trigger("resize.svgResize")) }), window.setTimeout(function (n) { t || (t = !0, e(window).trigger("resize.svgResize")) }, 1e3) }() }, a.swiper = function () { function t(e, t) { return '<a class="swiper-pagination-bullet" href="#"><span class="hide-txt">' + (e + 1) + "/" + t + "</span></a>" } function n(t) { return e(t).find(".swiper-slide").length > 1 ? (e(t).find(".swiper-util").show(), !0) : (e(t).find(".swiper-util").hide(), !1) } return { ie9SubSwiper: function (i, a) { if (!n(i)) return !1; for (var o = e(i), s = o.find(".swiper-wrapper").find(".swiper-slide").length, r = o.find(".swiper-pagination"), l = 0; l < s; l++)e(t(l, s)).data("index", l).appendTo(r).on("click", function (e) { e.preventDefault() }); var d = new Swiper(o.get(0), e.extend({ pagination: o.find(".swiper-pagination").get(0), paginationElementClass: "swiper-pagination-bullet", paginationElement: "a", paginationClickable: !0, createPagination: !1, paginationActiveClass: "on", autoplay: 4e3, autoplayDisableOnInteraction: !1, loop: !0, speed: 500, initialSlide: 0 }, a)), c = e(i).find(".btn-pause"), u = e(i).find(".btn-play"); return c.on("click", function (e) { e.preventDefault(), c.css({ display: "none" }), u.css({ display: "block" }), d.startAutoplay() }), u.on("click", function (e) { e.preventDefault(), u.css({ display: "none" }), c.css({ display: "block" }), d.stopAutoplay() }), e(i).find(".btn-prev").on("click", d.swipePrev), e(i).find(".btn-next").on("click", d.swipeNext), d }, subSwiper: function (i, a) { if (!n(i)) return !1; var o = new Swiper(i, e.extend({ pagination: ".swiper-pagination", paginationElement: "a", paginationClickable: !0, clickable: !0, paginationType: "bullets", paginationBulletRender: function (e, n, i) { return t(n, e.slides.length - 2) }, bulletActiveClass: "on", nextButton: ".swiper-btn-next", prevButton: ".swiper-btn-prev", autoplay: 4e3, autoplayDisableOnInteraction: !1, loop: !0, speed: 500 }, a, { a11y: !0, prevSlideMessage: "이전 슬라이드 보기", nextSlideMessage: "다음 슬라이드 보기", paginationBulletMessage: "{{index}}번째로 이동" })), s = e(i).find(".btn-pause"), r = e(i).find(".btn-play"); return s.on("click", function (e) { e.preventDefault(), s.css({ display: "none" }), r.css({ display: "block" }), o.startAutoplay() }), r.on("click", function (e) { e.preventDefault(), r.css({ display: "none" }), s.css({ display: "block" }), o.stopAutoplay() }), e(i).on("mouseover", ".swiper-pagination-bullet", function () { o.slideTo(e(i).find(".swiper-pagination-bullet").index(this) + 1) }), o } } }(), a.nanoScroll = function (t) { e(t).nanoScroller({ sliderMaxHeight: 46 }) }, a.direction = function (n) { function i(t) { var n = a.data("tabIndex"), i = s.eq(n), o = e(this).data("index"); t.preventDefault(), i.trigger("direction", o).find(".btn-view-map").removeClass("on").eq(o).addClass("on"), 1 === n && 1 === o ? (i.find(".market-btn").removeClass("on").eq(o).addClass("on"), i.find(".market-btn").eq(o + 1).addClass("on")) : i.find(".market-btn").removeClass("on").eq(o).addClass("on") } var a = e(n), o = a.find(".direction-nav .link"), s = a.find(".direction-content"), r = new TimelineMax({ paused: !0, yoyo: !0, repeat: -1 }); o.each(function (t, n) { e(this).data("index", t) }).on("click", function (n) { var i = e(this).data("index"); r.pause(0).clear(), n.preventDefault(), t.set(".is-ev01", { className: "-=on" }), a.data("tabIndex", i), o.removeClass("on").eq(i).addClass("on"), s.hide().eq(i).show().find(".btn-view-map:eq(0)").trigger("click") }), s.each(function (t, n) { e(this).find(".btn-view-map").each(function (t, n) { e(this).data("index", t) }).on("click", i), e(this).find(".market-btn").each(function (t, n) { e(this).data("index", t) }).on("click", function (i) { var a = e(this).data("index"); 1 === t && 2 === a && (a = 1), i.preventDefault(), e(n).find(".btn-view-map").eq(a).trigger("click") }) }), s.on("direction", function () { t.set(".is-ev01", { className: "-=on" }) }), s.eq(1).on("direction", function (n, i) { var a = e(this); r.pause(0).clear(), 0 === i ? (t.set(a.find(".is-ev01"), { className: "+=on" }), r.to("", 1, {}).to(a.find(".is-way01"), .1, { autoAlpha: 1 }, .5)) : r.to(a.find(""), 1.3, {}).to(a.find(".is-way02"), .1, { autoAlpha: 1 }, .4).to(a.find(".is-way03"), .1, { autoAlpha: 1 }, .7), r.play() }), s.eq(2).on("direction", function (n, i) { var a = e(this); switch (r.pause(0).clear(), i) { case 0: t.set(a.find(".is-ev01"), { className: "+=on" }), r.to("", 1, {}).to(a.find(".is-way01"), .1, { autoAlpha: 1 }, .5); break; case 1: r.to(a.find(""), 1, {}).to(a.find(".is-way02"), .1, { autoAlpha: 1 }, .5); break; case 2: r.to(a.find(""), 1, {}).to(a.find(".is-way03"), .1, { autoAlpha: 1 }, .5) }r.play() }), s.eq(3).on("direction", function (n, i) { var a = e(this); switch (r.pause(0).clear(), i) { case 0: t.set(a.find(".is-ev01"), { className: "+=on" }), r.to("", 1, {}).to(a.find(".is-way01"), .1, { autoAlpha: 1 }, .5); break; case 1: r.to(a.find(""), 1, {}).to(a.find(".is-way02"), .1, { autoAlpha: 1 }, .5) }r.play() }), s.eq(4).on("direction", function (t, n) { var i = e(this); r.pause(0).clear(), r.to("", 1, {}).to(i.find(".is-way01"), .1, { autoAlpha: 1 }, .5), r.play() }), o.eq(0).trigger("click") }, a.audioGuideLayer = function (i) { function a() { return e.get({ url: "https://" + o, crossDomain: !0, context: this }).then(function (n) { if (200 === n.httpStatus || 204 === n.httpStatus) { var i = n.audioList; if (!i) return; (i = e.extend({ data: JSON.parse(i) }, { text: s })).exhabitionTitle = i.data[0].exhabitionTitle, i.exhabitionDateText = i.data[0].exhabitionDateText; var a = _.template(r)(i); e(document).on("click", ".ico-global-play", function () { !function (e, n) { e && (e.isPlay && e.pauseVideo ? (t.to(n, .4, { opacity: 1 }), e.pauseVideo(), e.isPlay = !1) : e.playVideo && (t.to(n, .4, { opacity: 0 }), e.playVideo(), e.isPlay = !0)) }(o, this) }); var o, l = e(a).appendTo("#content"), d = i.data, c = l, u = l.find(".video"), p = l.find(".audio-tit"), f = l.find(".audio-caption-scroll"), h = c.find(".ico-global-play"), w = l.find(".audio-list-item").on("click.audioguide", function () { if (e(this).hasClass("lock") || e(this).hasClass("play")) return !1; var n = e(this).data("audio-index"); w.removeClass("play"), e(this).addClass("play"), p.text(d[n].title), f.html(d[n].audio_script), u.attr("src", "https://www.youtube.com/embed/" + d[n].audio_guide_url + "?enablejsapi=1&controls=0&rel=0&showinfo=0&modestbranding=1"), o = new YT.Player(u.get(0), { enablejsapi: 1 }), t.set(h, { opacity: 0 }) }); e("#infoAudioBtn").on("click.audioguide", function (t) { e(".audio-guide-layer, .dimm").show(), l.find(".nano").nanoScroller({ sliderMaxHeight: 46 }), w.removeClass("play"), w.eq(0).click() }), l.find(".btn-close-guide").on("click.audioguide", function (t) { t.preventDefault(), e(".audio-guide-layer, .dimm").hide(), e(".audio-guide-layer").find(".nano").nanoScroller({ destroy: !0 }), o && o.pauseVideo && o.pauseVideo() }); var m = l.find(".password-confirm-area #audio-password"), v = l.find(".alert-popup-wrap"), g = !1, b = n.audioPwd && JSON.parse(n.audioPwd); b = b && b[0] && b[0].pwd, l.find(".password-confirm-area .btn-shape01-color01").on("click", function (e) { e.preventDefault(), b === m.val() ? (l.find(".password-confirm-area, .copy").remove(), w.removeClass("lock"), g = !0) : v.show() }) } }) } var o = e(i).data("url"), s = { ko: { copy1: "롯데뮤지엄 입장 후 안내 받은 비밀번호를 입력하시면 전체 오디오가이드를 청취하실 수 있습니다.", copy2: "오디오 가이드는 데스크에 준비되어 있습니다.", pwdInput: "비밀번호를 입력해주세요.", pwdConfirm: "비밀번호를 확인해주세요.", ok: "확인", close: "오디오가이드 닫기" }, en: { copy1: "Once you enter LOTTE Museum, you can listen to the entire audio guide with your password.", copy2: "The audio guide is available at the desk.", pwdInput: "Enter your password", pwdConfirm: "Please check your password.", ok: "OK", close: "Audio guide close" } }[e("html").attr("lang")], r = (n.windowScroll(), '<div class="audio-guide-layer" style="display:;"><div class="audio-guide-content"><div class="tit">AUDIO GUIDE</div><div class="copy"><%- text.copy1 %><br><%- text.copy2 %></div><div class="password-confirm-area clfix"><div class="input-group"><input type="password" name="" required id="audio-password" title="${ text.pwdInput }"><label for="audio-password"><%- text.pwdConfirm %></label></div><a class="btn-shape01-color01" href="#"><span class="txt">${ text.ok }</span></a></div><div class="alert-popup-wrap" id="audio-message" style="display:none;"><div class="alert-popup-content"><div class="popup-box"><div class="popup-body fixed-height"><div class="txt01"><%- text.pwdConfirm %></div></div><div class="popup-bottom"><a class="btn-confirm" href="#"></a></div></div></div></div><div class="audio-detail-wrap clfix"><div class="audio-info"><span class="name"><%- exhabitionTitle %> /</span><span class="date"><%- exhabitionDateText %></span></div><div class="audio-list-wrap"><div class="audio-list-scroll-wrap nano"><div class="audio-list-scroll nano-content"><% var num = 1; %><% _.each(data, function (item, index) { %><% if(item.audio_guide_url && item.audio_guide_url.length > 0) { %><div class="audio-list"><div class="audio-list-item clfix ${index !== 0 ? \'lock\' : \'\' }" tabindex="0" data-audio-index="${index}"><span class="no">${ index >= 10 ? index : \'0\' + num++ }</span><span class="title"><%- item.title %></span><span class="state"><span class="ico-is"><span class="hide-txt">재생중</span><span class="ico"></span></span></span></div></div><% } %><% }); %></div></div></div><div class="audio-view-wrap"><% if(data[0].audio_guide_url) { %><div class="movie-layer"></div><div class="audio-view video-area"><div class="movie-box movie-box-audioguide"><div class="ico-global-play"></div><iframe class="video" width="450" height="253" frameborder="0" src="https://www.youtube.com/embed/?enablejsapi=1&controls=0&rel=0&showinfo=0&modestbranding=1"></iframe></div></div><div class="audio-tit"><%- data[0].title %></div><div class="audio-caption"><div class="audio-caption-scroll-wrap nano"><div class="audio-caption-scroll nano-content ui_scroll-cont"><div class="audio-caption-scroll"><%= data[0].audio_script %></div></div></div></div><% } %></div></div><a class="btn-close-guide" href="#"><span class="hide-txt"><%- text.close %></span><span class="ico"></span></a></div></div>'); e("#infoAudioBtn").on("click", function (t) { t.preventDefault(), !e(this).data("isLoaded") && YT && YT.Player && (a().then(function () { e(".audio-guide-layer, .dimm").show(), e(".audio-guide-layer").find(".nano").nanoScroller({ sliderMaxHeight: 46 }), e(".audio-guide-layer").find(".audio-list-item").eq(0).click() }), e(this).data("isLoaded", !0)) }), e(document).on("click.common", ".alert-popup-wrap .btn-confirm", function (t) { t.preventDefault(), e(this).closest(".alert-popup-wrap").hide() }) } }(jQuery, TweenMax, window.uxlib); var isIE9 = !!navigator.userAgent.match(/Trident\/5|MSIE\s9\.0/), isIE10 = !!navigator.userAgent.match(/Trident\/6|MSIE\s10\.0/); window.CULTURE_CODE = $("html").attr("lang"), function (e, t, n, i) { var a = window.uxdev = {}; n.elEventCall(".ui_drop-box", i.dropBoxEventHandler), n.elEventCall(".ui_all-menu", i.allMenuEventHandler), n.elEventCall(".ui_header-fixed", i.fixedEventHandler), n.elEventCall(".ui_search-box", i.searchBoxEventHandler), n.elEventCall(".ui_faq-flip", i.faqFlipEventHandler), n.elEventCall(".ui_toggle", i.toggleEventHandler), n.elEventCall(".ui_family-box", i.familyBoxEventHandler), n.elEventCall(".ui_ticket-accordion", i.ticketAccordionEventHandler), n.elEventCall(".ui_ticket-qna", i.ticketQnaEventHandler), n.elEventCall(".ui_info", i.infoEventHandler), n.elEventCall(".ui_scroll", i.scrollHook), n.elEventCall(".ui_svg-sub", i.drawSvgSub), n.elEventCall(".nano", i.nanoScroll), n.elEventCall(".ui_direction", i.direction), n.elEventCall("#infoAudioBtn", i.audioGuideLayer), isIE9 ? (n.elEventCall(".ui_swiper-sub", i.swiper.ie9SubSwiper), n.elEventCall(".sub-banner", i.swiper.ie9SubSwiper)) : (n.elEventCall(".ui_swiper-sub", i.swiper.subSwiper), n.elEventCall(".sub-banner", i.swiper.subSwiper)), a.pinterestLoad = n.elEventCall(".ui_pinterest", i.pinterest).pinterestLoad; var o; "ko" === CULTURE_CODE ? o = ["NotoSans-Regular", "NotoSans-Bold", "Oswald-Regular", "Oswald-Medium", "Oswald-SemiBold", "Oswald-Bold", "Roboto-Regular", "MyriadPro-Semibold"] : "en" === CULTURE_CODE && (o = ["Oswald-Regular", "Oswald-Medium", "Oswald-SemiBold", "Oswald-Bold", "Roboto-Regular", "Roboto-Bold", "Roboto-Black"]); var s = e.map(o, function (e) { return new FontFaceObserver(e).load(null, 5e3) }); e.when(s).then(function () { document.documentElement.className += " fonts-loaded" }) }(jQuery, Masonry, window.uxlib, window.uxui), function (e, t, n, i) { function a(e) { e = e || 300, h.fadeIn(e), function (e) { TweenMax.to("#header", e / 1e3, { autoAlpha: 0, onComplete: function () { TweenMax.set("#header", { display: "none" }) } }) }(e), s(e) } function o(e) { e = e || 300, h.fadeOut(e), function (e) { TweenMax.to("#header", e / 1e3, { autoAlpha: 1, onStart: function () { TweenMax.set("#header", { display: "block" }) } }) }(e), r(e) } function s(e) { TweenMax.to(".main-indicator-area, .btn-top-area", e / 1e3, { autoAlpha: 0, onComplete: function () { TweenMax.set(".main-indicator-area, .btn-top-area", { display: "none" }) } }) } function r(e) { TweenMax.to(".main-indicator-area, .btn-top-area", e / 1e3, { autoAlpha: 1, onStart: function () { TweenMax.set(".main-indicator-area, .btn-top-area", { display: "block" }) } }) } var l = e("#content").data("url"), d = e("#content").data("uxUrl"); e.support.cors = !0, window.BASE_URL = l ? window.BASE_URL = l : "http://localhost:9999", d || (d = l); var c = BASE_URL + "/posterList", u = BASE_URL + "/exhibitions", p = BASE_URL + "/banner"; window.CULTURE_CODE = e("html").attr("lang"), window.IMAGE_BASE_PATH = BASE_URL + "/attach"; var f = { postTemplate: t.template(e("#post-slide-template").html()), bannerTemplate: t.template(e("#top-banner-template").html()), postListTemplate: t.template(e("#post-list-template").html()), contentsTemplate: t.template(e("#contents-template").html()) }, h = e(".dimm"), w = h.add(".spinner-wrap:not(.intro-spinner)"); window.getMinImgSrc = function (e) { return e.replace(/(\..*)$/, "_min$1") }, window.htmlEncode = function (e) { return e.replace(/&gt;/g, ">").replace(/&lt;/g, "<").replace(/&quot;/g, "'") }, window.setImgSrc = function (e, t) { return (IMAGE_BASE_PATH + e + "/" + getMinImgSrc(t)).replace(/\\/g, "/") }, window.setOriginImgSrc = function (e, t) { return (IMAGE_BASE_PATH + e + "/" + t).replace(/\\/g, "/") }; var m = function (t) { e(t).each(function (t, n) { if (e(this).is("img")) { var i = function (t) { var n = e(t).attr("src"); return !!n && { src: n.replace(/_min(\..*)$/, "$1") } }(this); i && e(this).attr(i) } else { var a = function (t) { var n = e(t).css("backgroundImage"); return !!n && { backgroundImage: n.replace(/_min(\.\w+)/, "$1") } }(this); a && e(this).css(a) } }) }, v = function (n, i) { var a = e(n).data("src"); return a && e(n).attr("src", a), new YT.Player(n, t.assign(i)) }, g = function (t) { var n = 0, i = t || 3; return function (t, a, o) { if ("timeout" !== a) t.status; else if (++n <= i) return void e.ajax(this) } }; e(document).on("click", ".ico-global-play", function () { !function (e, t) { e && (e.isPlay && e.pauseVideo ? (TweenMax.to(t, .4, { opacity: 1 }), e.pauseVideo(), e.isPlay = !1) : e.playVideo && (TweenMax.to(t, .4, { opacity: 0 }), e.playVideo(), e.isPlay = !0)) }(e(this).next(".video").data("video"), this) }), window.MainManager = MainManager = function (t, n) { this.$el = e(t), this.blockChangeScene = !1, this.hasBanner = !1, this.showBanner = !e.cookie("topBannerNoView"), this.isBannerAnimated = !1 }, MainManager.prototype = { viewMode: "onepage", init: function () { this.ajaxOtp = { crossDomain: !0, context: this }, this.$header = this.$el.find(".header-wrap"), this.$headerWrap = this.$el.find("#header"), this.$indicator = this.$el.find(".main-indicator-area"), this.$indicatorBtns = this.$indicator.find("a"), this.$topBtn = this.$el.find(".btn-top-area"), this.$topArrow = this.$topBtn.find(".btn-top-main"), this.$mainSwipe = this.$el.find(".ui_swiper-post"), this.$mainSwipeWrapper = this.$mainSwipe.find(".poster-wrapper"), this.$postBtns = this.$el.find(".swiper-custom-button .swiper-main-button"), this.$location = this.$el.find(".location-museum"), this.$locationText = this.$location.find(".text"), this.loadPoster().then(function (t) { this.mainPosts = t.mainPosts, this.subPosts = t.subPosts, this.postIndex = t.postIndex, this.setPostSlidesData(), this.mainItems = new Array(this.mainPosts.length), this.setPosterList(); var n, i = "", a = location.href.match(/#\w+/); this.routePath = a && a[0]; var o = !1; switch (this.routePath) { case "#past": n = this.postIndex[0], "ko" === CULTURE_CODE ? i = "지난 전시가 없습니다." : "en" === CULTURE_CODE && (i = "No last exhibition."), o = !0; break; case "#current": n = this.postIndex[1], "ko" === CULTURE_CODE ? i = "진행 중인 전시가 없습니다." : "en" === CULTURE_CODE && (i = "There are no exhibits in progress."), o = !0; break; case "#upcoming": n = this.postIndex[2], "ko" === CULTURE_CODE ? i = "예정 전시는 준비 중입니다." : "en" === CULTURE_CODE && (i = "A special exhibition is coming soon."), o = !0 }if (void 0 === n) { var s; this.postIndex[1] >= 0 ? (n = this.postIndex[1], s = 1) : this.postIndex[2] >= 0 ? (n = this.postIndex[2], s = 2) : this.postIndex[0] >= 0 && (n = this.postIndex[0], s = 0), o && (e("#modal_content .popup-body").addClass("fixed-height").html('<div class="txt01">' + i + "</div>"), e("#modal_content, .dimm").show(), location.replace(this.$postBtns.eq(s).attr("href"))) } this.setMainItem(n), this.currentExhibition = n, this.$postSlides.eq(this.currentExhibition).show(), this.bindEvents() }) }, setPostSlidesData: function () { this.$postSlides = this.$mainSwipeWrapper.find(".poster-slide") }, loadPoster: function (n) { return e.get(t.assign({ url: c, data: { culturecode: CULTURE_CODE }, error: g() }, this.ajaxOtp)).then(function (e) { e && e.status, e && e.msg; var n, i, a = JSON.parse(e.data), o = [1, 2, 0]; if (200 === e.httpStatus || 203 === e.httpStatus) return a = t.map(a, function (e) { return e.exhibitionType = e.exhabitionType && o[Number(e.exhabitionType)], e.attach_type = e.attatch_Type && Number(e.attatch_Type), e }), i = t.reverse(t.dropRightWhile(a, function (e) { return 0 !== e.exhibitionType })), n = t.slice(a, i.length <= 0 ? 0 : i.length - 1), this.setMainPosters([].concat(n), [].concat(i)) }) }, setMainPosters: function (n, i) { var a = f.postTemplate, o = ["past", "current", "upcoming"], s = this, r = t.chain(n).sortBy([function (e) { return e.exhibitionType }]).each(function (e) { return e.type = o[e.exhibitionType], e }).value(), l = t.reduce(r, function () { var e = 0; return function (t, n, i) { return t[n.exhibitionType] = e++ , t } }(), new Array(3)); return this.$mainSwipeWrapper.append(a({ data: r, subPosts: i })), this.$postBtns.each(function (t) { e(this).data("slideIndex", l[t]) }).on("click", function (t) { t.preventDefault(), location.replace(e(this).attr("href")), s.slidePost(e(this).data("slideIndex")) }), this.$postBtns.hide(), t.each(r, function (e) { s.$postBtns.eq(e.exhibitionType).show() }), this.$postBtns = this.$el.find(".swiper-custom-button .swiper-main-button"), { mainPosts: r, subPosts: i, postIndex: l } }, slidePost: function (e) { var t = this; if (void 0 !== e && e !== this.currentExhibition && !t.isPostTweening) { var n = t.$postSlides[t.currentExhibition], i = t.$postSlides[e], a = t.currentExhibition > e ? 1 : -1; this.postVideoStop(), this.tempSlidePostTimeline = new TimelineMax({ onStart: function () { t.setMainItem(e), t.isPostTweening = !0 }, onComplete: function () { t.isPostTweening = !1 } }).set(i, { xPercent: 100 * -a, scale: .8, display: "block" }, 0).to(n, .6, { scale: .8, ease: Power2.easeInOut }, .001).to(i, 1, { xPercent: 0, ease: Power2.easeOut }, .8).fromTo(i, 1, { rotationY: -4 * -a }, { rotationY: 0, ease: Power2.easeOut }, .8).to(n, 1, { x: 100 * a + "%", ease: Power2.easeOut }, .8).fromTo(n, 1, { rotationY: 0 }, { rotationY: -3 * a, ease: Power2.easeOut }, .8).to(i, .6, { scale: 1, ease: Power2.easeInOut }, 1.7).set(n, { scale: 1, display: "none" }).timeScale(1) } }, setBanner: function () { var a = this; e.get(t.assign({ url: p, data: { culturecode: CULTURE_CODE } }, this.ajaxOtp)).then(function (o) { if (200 === o.httpStatus || 203 === o.httpStatus) { var s = f.bannerTemplate; if (o.data = o.data && JSON.parse(o.data), o.data = t.orderBy(t.filter(o.data, function (e) { return "2" !== e.viewType }), "idx", "desc"), e("#content").prepend(s(o)), a.$topBanner = e(".top-banner-area"), a.$topBanner.length > 0) { if (a.hasBanner = !0, isIE9) n.elEventCall(".banner-swiper-container", i.swiper.ie9SubSwiper, { speed: 0 }); else if (isIE10) n.elEventCall(".banner-swiper-container", i.swiper.subSwiper, { speed: 0 }); else n.elEventCall(".banner-swiper-container", i.swiper.subSwiper, { effect: "fade", fadeEffect: { crossFade: !0 } }); a.bannerControll(-1) } } }) }, setMainItem: function (t, n) { if (this.currentExhibition === t && "pastChange" !== n) return !1; var i = this.mainPosts[t]; this.$postBtns.removeClass("on").eq(i.exhibitionType).addClass("on"), i.area ? (this.$location.css({ display: "inline-block" }), this.$locationText.html(i.area)) : this.$location.css({ display: "none" }), this.currentExhibition = t, this.mainItems[t] && "pastChange" !== n ? this.setIndicator(this.mainItems[t].contents) : (w.show(), this.tempSlidePostTimeline && this.tempSlidePostTimeline.pause && (this.tempSlidePostIsPlay = !0, this.tempSlidePostTimeline.pause()), this.mainItems[t] = new b(this.mainPosts[t], { onLoadAfter: function (t, n) { return function () { var t = n.currentExhibition, i = e(n.$postSlides.eq(t)), a = n.mainItems[t]; n.setIndicator(a.contents), m(i.find("img, .bg-img")), a.$contentEls.imagesLoaded({ background: ".bg-img" }, function () { if (n.isIntroLoad || (window.setTimeout(function () { n.onLoad.call(n) }, 300), n.isIntroLoad = !0), i.has(".txt-area").length > 0) TweenMax.staggerFromTo(i.find(".txt-area > *"), .8, { autoAlpha: 0, x: -50 }, { autoAlpha: 1, x: 0, ease: Power2.easeOut, delay: .5 }, .2); else { var t = i.find(".video"); t.data("video", v(t.get(0))) } e(".poster-past-list-wrap").fadeOut(300), window.setTimeout(function () { n.isSetBanner || e.cookie("topBannerNoView") || (n.setBanner.call(n), n.isSetBanner = !0), n.tempSlidePostIsPlay && window.setTimeout(function () { n.tempSlidePostTimeline.play(), n.tempSlidePostIsPlay = !1 }, 500), w.fadeOut(500) }, 100) }) } }(0, this) }, this)) }, changePastPoster: function (n) { var i = f.postTemplate; w.show(), this.mainItems[0].destroy(), this.mainItems[0] = null; var a = this.mainPosts[0] = t.find(this.subPosts, function (e) { return e.id === n }); a.type = "past", e(".slide-past").remove(), this.$mainSwipeWrapper.prepend(i({ data: [a], subPosts: this.subPosts })), e(".slide-past").show(), this.setPostSlidesData(), this.setMainItem(0, "pastChange") }, enableChangeScene: function () { this.blockChangeScene = !1 }, disableChangeScene: function () { this.blockChangeScene = !0 }, bannerControll: function (e) { var t = this.mainItems[this.currentExhibition]; if (this.hasBanner && !t.isAnimated && !this.isBannerAnimated) { var n = this.$topBanner.hasClass("open"); n && 1 === e ? this.bannerClose() : n || -1 !== e || this.bannerOpen() } }, bannerOpen: function () { var e = this, t = this.$topBanner; this.isBannerAnimated = !0, new TimelineLite({ onStart: function () { TweenMax.set(t, { className: "+=open" }) }, onComplete: function () { e.isBannerAnimated = !1 } }).set(this.$topBanner, { display: "block" }, 0).to(this.$topBanner, .6, { height: 150, ease: Expo.easeOut }, 0).to(this.$headerWrap, .6, { marginTop: 150, ease: Expo.easeOut }, 0) }, bannerClose: function () { var e = this, t = this.$topBanner; this.isBannerAnimated = !0, new TimelineLite({ onComplete: function () { TweenMax.set(t, { className: "-=open", display: "none" }), e.isBannerAnimated = !1 } }).to(t, .6, { height: 0, ease: Expo.easeOut }, 0).to(this.$headerWrap, .6, { marginTop: 0, ease: Expo.easeOut }, 0) }, bindEvents: function () { var t = this; window.setTimeout(function () { t.$el.on("mousewheel.mainmove", function (i) { var a = -i.deltaY > 0 ? 1 : -1, o = t.mainItems[t.currentExhibition].activeContent, s = o + a; if (e(".ui_all-menu-cont--on").length > 0) return !1; n(s, "wheel"), 0 === o && t.bannerControll(a) }), t.$indicatorBtns.on("click.mainmove", function (i) { var a = t.$indicatorBtns.filter(function () { return "block" === e(this).css("display") }).index(this); t.bannerControll(1), n(a + 1, "indicator") }) }, 1e3); var n = function (e, n) { var i = t.$topBanner && t.$topBanner.hasClass("open"); if (t.blockChangeScene || "indicator" !== n && i) return !0; t.mainItems[t.currentExhibition].changeScene(e) }, i = this.$el.find(".poster-past-list-wrap"); e(document).on("click", "#id-poster .swiper-main-button.list", function (n) { if (!i.data("isLoaded") && (m(i.find("img")), i.data("isLoaded", !0), isIE9)) { var a = this.pastListSwiper = new Swiper(".past-swiper-container", { freeMode: !0, slidesPerView: "auto", createPagination: !1, speed: 500 }); e(".past-swiper-container").find(".prev").on("click", a.swipePrev), e(".past-swiper-container").find(".next").on("click", a.swipePrev) } n.preventDefault(), i.fadeIn(300), t.setHeaderBlack(), s() }), e(document).on("click", "#id-poster .swiper-main-button.list-close", function (e) { e.preventDefault(), i.fadeOut(300), t.setHeaderWhite(), r() }), e(".ui_family-box-cont").on("mouseover", function () { t.disableChangeScene() }).on("mouseout", function () { t.enableChangeScene() }), this.$topBtn.on("click", function () { var e = t.$topArrow.hasClass("up"); n(e ? 0 : 1) }), e("#modal_content .popup-bottom").on("click", function () { e("#modal_content, .dimm").hide() }), e("#nav_current1, #nav_current2, #nav_past, #nav_upcoming").on("click", function () { location.reload() }), e(document).on("click", ".btn-close-banner", function () { e.cookie("topBannerNoView", !0, { expires: 1 }), t.bannerClose(), t.hasBanner = !1 }), e("#id-poster").on("mousemove", ".poster-slide", function (t) { var n = navigator.userAgent.toLowerCase(); if ("Netscape" === navigator.appName && -1 !== n.indexOf("trident") || -1 !== n.indexOf("msie")) return e("#id-poster").off("mousemove.bgmove"), !0; var i = e(window).width() / 2, a = (i - t.clientX) / i; a = a.toFixed(4), a *= 14, TweenMax.to(e(this).find(".bg-img"), 1.5, { backgroundPositionX: 50 - a + "%", ease: Power3.easeOut }) }) }, loadImage: function () { }, setIndicator: function (e) { var t = this.$indicatorBtns, n = ["exhibition", "artist", "artwork", "information"]; this.setIndicator = function (e) { t.hide(); for (var i = 0, a = e.length; i < a; i++)switch (e[i].name) { case n[0]: t.eq(0).show(); break; case n[1]: t.eq(1).show(); break; case n[2]: t.eq(2).show(); break; case n[3]: t.eq(3).show() } }, this.setIndicator(e) }, indicatorOn: function (t) { var n = this.mainItems[this.currentExhibition].contents[t], i = t - 1; if (!n) return !1; this.$indicatorBtns.removeClass("on"), "poster" === n.name || ("footer" === n.name ? this.$indicatorBtns.last().addClass("on") : this.$indicatorBtns.filter(function () { return "block" === e(this).css("display") }).eq(i).addClass("on")) }, setIndicatorWhite: function () { this.$indicator.removeClass("black").addClass("white") }, setIndicatorBlack: function () { this.$indicator.addClass("black").removeClass("white") }, setIndicatorDefault: function () { this.$indicator.removeClass("black white") }, setHeaderWhite: function () { this.$header.removeClass("black").removeClass("white-black").addClass("white") }, setHeaderBlack: function () { this.$header.removeClass("white").removeClass("white-black").addClass("black") }, setHeaderWhiteBlack: function () { this.$header.removeClass("white").removeClass("black").addClass("white-black") }, setHeaderDefault: function () { this.$header.removeClass("white black white-black") }, setArrowUp: function () { this.$topArrow.addClass("up") }, setArrowDown: function () { this.$topArrow.removeClass("up") }, setArrowWhite: function () { this.$topBtn.removeClass("black") }, setArrowBlack: function () { this.$topBtn.addClass("black") }, setPosterList: function () { if (void 0 === this.postIndex[0]) return !1; var t = f.postListTemplate; this.subPosts; if (e(".poster-past-list-wrap .swiper-wrapper").append(t({ subPosts: this.subPosts })), isIE9); else this.pastListSwiper = new Swiper(".past-swiper-container", { observer: !0, observeParents: !0, slidesPerView: "auto", freeMode: !0, navigation: { nextEl: ".next", prevEl: ".prev" } }); var n = this; this.$el.on("click", ".poster-past-item", function () { n.changePastPoster(e(this).data("id")) }) }, postVideoStop: function () { this.$mainSwipeWrapper.find(".movie").each(function () { var t = e(this).data("video"); t && t.getPlayerState && 1 === t.getPlayerState() && t.stopVideo && t.seekTo && (t.seekTo(0), t.stopVideo()) }) }, onLoad: function () { } }; var b = function (n, i, a) { this.ajaxOtp = { crossDomain: !0, context: this }, this.isLoaded = !1, this.manager = a, this.poster = n, this.id = n.id, this.date = n.term, this.url = u, this.opt = t.assign({ $parentEl: e("#main"), onLoadBefore: t.noop, onLoadAfter: t.noop }, i), this.info = n.exhibitionInfo, this.activeContent = 0, this.init() }; b.prototype = { init: function () { this.opt.onLoadBefore(), this.loadContent().then(function () { this.isLoaded = !0, this.opt.onLoadAfter(); for (var e = 1, t = this.contents.length; e < t; e++)this.contents[e].$el.hide() }) }, loadContent: function () { return e.get(t.assign({ url: this.url, data: { idx: this.id }, error: g() }, this.ajaxOtp)).then(function (e) { e && e.status, e && e.msg; var n = e; return n.artistInfo = n.artistInfo && JSON.parse(n.artistInfo), n.artworkInfo = n.artworkInfo && JSON.parse(n.artworkInfo), n.caution = n.caution && JSON.parse(n.caution), n.contactUs = n.contactUs && JSON.parse(n.contactUs), n.exhibitionContentsInfo = n.exhibitionContentsInfo && JSON.parse(n.exhibitionContentsInfo), n.exhibitionInfo = n.exhibitionInfo && JSON.parse(n.exhibitionInfo), n.openingHours = n.openingHours && JSON.parse(n.openingHours), n.ticketPrice = n.ticketPrice && JSON.parse(n.ticketPrice), this.audioPwd = n.audioPwd && JSON.parse(n.audioPwd), n.subBanner = n.subBanner && t.orderBy(t.filter(JSON.parse(n.subBanner), function (e) { return "2" !== e.viewType }), "idx", "desc"), n.hasAudioGuide = t.some(n.artworkInfo, "audio_guide_url"), this.__setContents(n) }) }, __setContents: function (n) { var i = f.contentsTemplate; this.opt.$parentEl.append(i(t.assign(n, { date: this.date, id: this.id }))), this.contents = t.filter([{ name: "poster", data: this.poster, $el: e("#id-poster"), isLoaded: !0 }, { name: "exhibition", data: n.exhibitionContentsInfo, $el: e("#id-exhibition-" + this.id), isLoaded: !1 }, { name: "artist", data: n.artistInfo, $el: e("#id-artist-" + this.id), isLoaded: !1 }, { name: "artwork", data: n.artworkInfo, $el: e("#id-artwork-" + this.id), isLoaded: !1 }, { name: "information", data: { subBanner: n.subBanner }, $el: e("#id-information-" + this.id), isLoaded: !1 }, { name: "footer", data: {}, $el: e("#footer"), isLoaded: !0 }], function (e) { return e.$el.length > 0 }), this.$contentEls = t.reduce(this.contents, function (e, t) { switch (t.name) { case "exhibition": case "artist": case "artwork": case "information": return e.add(t.$el) }return e }, e("")), this.setContentsElement() }, setContentsElement: function () { this.__processContentsElement("set") }, unsetContentsElement: function () { this.__processContentsElement("unset") }, __processContentsElement: function (e) { var n = this; t.each(t.concat(this.contents, { name: "common" }), function (t) { var i = t.name, a = n[e + i.charAt(0).toUpperCase() + i.slice(1)]; a && a.call(n, t.$el) }) }, getContentOfName: function (e) { return t.find(this.contents, function (t, n, i) { return t.name === e }) }, changeScene: function (t) { this.changeScene = function (t) { function a(e, t) { "exhibition" === t || "artist" === t ? (e.setIndicatorBlack(), e.setHeaderBlack(), e.setArrowBlack()) : "poster" === t ? (e.setHeaderDefault(), e.setIndicatorDefault(), e.setArrowWhite()) : "artwork" === t ? (e.setHeaderBlack(), e.setArrowBlack(), e.setIndicatorBlack()) : "footer" === t ? e.setHeaderWhiteBlack() : (e.setHeaderWhite(), e.setArrowWhite(), e.setIndicatorWhite()), "poster" === t ? e.setArrowDown() : (e.setArrowUp(), e.postVideoStop()), "information" === t && p.subBannerSwiper && p.subBannerSwiper.slideTo && p.subBannerSwiper.stopAutoplay && p.subBannerSwiper.startAutoplay && (p.subBannerSwiper.slideTo(1), p.subBannerSwiper.stopAutoplay(), p.subBannerSwiper.startAutoplay()) } var o = this.contents.length; if (this.isAnimated || t === this.activeContent || t < 0 || t >= o) return !1; this.isAnimated = !0; var s = this.contents[t], r = this.contents[this.activeContent], l = s.$el, d = this.contents[this.activeContent].$el, c = t > this.activeContent ? 1 : -1, u = new TimelineMax({ paused: !0 }), p = this, f = !1, h = this.getContentOfName("information").$el; if ("information" === r.name && "footer" === s.name) { var w = this.getContentOfName("footer").$el.outerHeight(); f = !0, u.set(d, { zIndex: 2 }, 1e-4).set(l, { zIndex: 1 }, 1e-4).to(d, .5, { y: -c * w, ease: Power2.easeInOut }, .001).fromTo(l, .45, { y: -w }, { display: "block", y: 0, ease: Power2.easeInOut }, .001).set(l, { zIndex: 4 }, .46).addCallback(function () { a(p.manager, s.name) }, 0) } else if ("footer" === r.name && "information" === s.name) f = !0, u.set(d, { zIndex: 1 }, 1e-4).set(l, { zIndex: 2 }, 1e-4).to(d, .4, { y: 0, ease: Power2.easeInOut }, .001).to(l, .4, { y: 0, ease: Power2.easeInOut }, .001).set(d, { display: "none" }, .41).addCallback(function () { a(p.manager, s.name) }, .4); else if ("footer" === r.name && "information" !== s.name) { h.add(d); u.set(d, { zIndex: 1 }, 1e-4).set(h, { zIndex: 2 }, 1e-4).to(d, .4, { y: 0, ease: Power2.easeInOut }, .001).to(h, .4, { y: 0, ease: Power2.easeInOut }, .001).set(d, { display: "none" }, .45).to(h, 1.1, { scale: .6, y: 4 * -c + "%", opacity: .75, ease: Power2.easeInOut }, .3).set(l, { zIndex: 3, display: "block" }, .3).fromTo(l, .6, { y: 110 * c + "%" }, { y: "0%", ease: Power2.easeOut }, .9).to(h, .5, { y: 30 * -(-1 === c ? 0 : 1) + "%", ease: Power2.easeOut }, 1).set(h, { display: "none", autoAlpha: 1, scale: 1 }, 1.5).timeScale(1.1) } else 1 === c ? u.set(d, { zIndex: 2, rotationX: 0 }, 1e-4).set(l, { zIndex: 3, display: "block", x: "0%" }, .001).to(d, 1.5, { scale: .8, opacity: .5, ease: Power1.easeOut }, 2e-4).to(d, 1.2, { y: "-15%", ease: Power3.easeOut }, .5).fromTo(l, 1.2, { y: 100 * c + "%" }, { y: "0%", ease: Power3.easeOut }, .55).fromTo(l, .9, { rotationX: .75 }, { rotationX: 0, ease: Power2.easeOut }, .85).timeScale(1.2) : -1 === c && u.set(d, { zIndex: 2, rotationX: 0 }, 1e-4).set(l, { zIndex: 3, display: "block", x: "0%" }, .001).to(d, 1.5, { scale: .8, opacity: .5, ease: Power1.easeOut }, 2e-4).to(d, 1.2, { y: "15%", ease: Power3.easeOut }, .5).fromTo(l, 1.2, { y: 100 * c + "%" }, { y: "0%", ease: Power3.easeOut }, .55).fromTo(l, .9, { rotationX: -.7 }, { rotationX: 0, ease: Power2.easeOut }, .85).timeScale(1.2); f ? 1 === c ? this.manager.setArrowBlack() : this.manager.setArrowWhite() : (new TimelineMax).to(p.manager.$header, .5, { opacity: 0, ease: Power2.easeOut }, 0).to(p.manager.$indicator, .5, { opacity: 0, ease: Power2.easeOut }, 0).addCallback(function () { p.manager.indicatorOn(t), a(p.manager, s.name) }, .5).to(p.manager.$indicator, .5, { opacity: 1, ease: Power2.easeOut }, .75).to(p.manager.$header, .5, { opacity: 1, ease: Power2.easeOut }, .75), u.eventCallback("onComplete", function () { f || TweenMax.set(d, { zIndex: 1, scale: 1, display: "none", rotationX: 0, opacity: 1 }), p.isAnimated = !1 }).play(), function (t) { var a = this.contents[t], o = a.name, s = this; if (!a.isLoaded) if (m(a.$el.find("img, .bg-img")), a.isLoaded = !0, "exhibition" === o) (new TimelineMax).staggerFromTo(a.$el.find(".title, .sub-title"), .8, { x: -80, autoAlpha: 0 }, { x: 0, autoAlpha: 1, ease: Power1.easeOut }, .15, .9).staggerFromTo(a.$el.find(".information-item"), .6, { x: -80, autoAlpha: 0 }, { x: 0, autoAlpha: 1, ease: Power1.easeOut }, .08, 1.3).fromTo(a.$el.find(".desc.text-overflow"), .8, { x: -100, autoAlpha: 0 }, { x: 0, autoAlpha: 1, ease: Power1.easeOut }, 2).fromTo(a.$el.find(".date"), .8, { x: 100, autoAlpha: 0 }, { x: 0, autoAlpha: 1, ease: Power2.easeOut }, 2).fromTo(a.$el.find(".btn-view-detail"), .5, { x: -30, autoAlpha: 0 }, { x: 0, autoAlpha: 1, ease: Back.easeOut }, 3.1), a.$el.find(".img-area.bg-img").css({ opacity: 0 }).imagesLoaded({ background: !0 }, function () { this.elements, TweenMax.fromTo(this.elements, 2, { opacity: 0 }, { opacity: 1, delay: .1 }) }); else if ("artist" === o) { var r = a.$el.find(".swiper-slide-active"); TweenMax.set(r.find(".name, .date, .title, .desc-scroll-wrap"), { x: -100, autoAlpha: 0 }), TweenMax.set(r.find(".btn-view-detail:eq(0)"), { x: -30, autoAlpha: 0 }), TweenMax.set(a.$el.find(".swiper-custom-pagination"), { autoAlpha: 0 }), TweenMax.set(r.find(".img-area.bg-img:eq(0)"), { autoAlpha: 0 }), (new TimelineMax).staggerTo(r.find(".name, .date, .title, .desc-scroll-wrap"), .8, { x: 0, autoAlpha: 1, ease: Power1.easeOut }, .2, 1).to(r.find(".btn-view-detail"), .6, { x: 0, autoAlpha: 1, ease: Back.easeOut }, 2.4).to(a.$el.find(".swiper-custom-pagination"), .5, { autoAlpha: 1 }, 2.4), isIE9 && window.setTimeout(function () { if (a.$el.find(".artist-swiper-container .swiper-slide").length > 1) { var e = s.artistSwiper = new Swiper(a.$el.find(".artist-swiper-container").get(0), { pagination: a.$el.find(".swiper-pages").get(0), paginationElementClass: "swiper-item", paginationElement: "a", paginationClickable: !0, createPagination: !1, paginationActiveClass: "on", speed: 500 }); a.$el.find(".prev").on("click", e.swipePrev), a.$el.find(".next").on("click", e.swipeNext) } }, 500), r.find(".img-area.bg-img").css({ opacity: 0 }).imagesLoaded({ background: !0 }, function () { this.elements, TweenMax.to(this.elements, 1, { autoAlpha: 1, ease: Power2.easeOut }) }) } else if ("artwork" === o) { var l = a.$el.find(".artwork-list-swiper-container"); l.find(".swiper-main-wrapper, .artwork-list-util-wrap").hide(), l.find("img").imagesLoaded(function () { window.setTimeout(function (e) { var t = l.find(".swiper-main-wrapper").width(); l.find(".swiper-main-wrapper, .artwork-list-util-wrap").show(), TweenMax.staggerFromTo(l.find(".swiper-main-slide"), 1.2, { x: t }, { x: 0, delay: .7, ease: Power2.easeOut }, .06) }, 500) }), window.setTimeout(function (t) { if (isIE9) { var n = a.$el.find(".artwork-list-swiper-container .swiper-main-slide").length; if (n > 1) { var i = s.artworkSwiper = new Swiper(a.$el.find(".artwork-list-swiper-container").get(0), { wrapperClass: "swiper-main-wrapper", slideClass: "swiper-main-slide", cssWidthAndHeight: !0, freeMode: !0, slidesPerView: "auto", createPagination: !1, speed: 500 }); e(".artwork-list-swiper-container .swiper-main-wrapper:eq(0)").css({ width: 300 * n + "px" }), a.$el.find(".prev").on("click", i.swipePrev), a.$el.find(".next").on("click", i.swipeNext) } } }, 500) } else "information" === o && isIE9 && window.setTimeout(function () { s.subBannerSwiper = n.elEventCall(".sub-banner", i.swiper.ie9SubSwiper) }, 1e3) }.call(this, t), this.activeContent = t }, this.changeScene(t) }, setExhibition: function () { }, setArtist: function (e) { var t, n = e.find(".swiper-item"); isIE9 || (isIE10 ? (t = this.artistSwiper = new Swiper(e.find(".artist-swiper-container").get(0), { speed: 600, grabCursor: !0, pagination: e.find(".swiper-pages").get(0), paginationType: "custom", paginationElement: "a", bulletClass: "swiper-item", bulletActiveClass: "on", paginationClickable: !0, nextButton: e.find(".next").get(0), prevButton: e.find(".prev").get(0), onInit: function () { n.first().addClass("on") }, onSlideChangeStart: function (e) { n.removeClass("on").eq(e.activeIndex).addClass("on") } }), n.on("click", function () { t.slideTo(n.index(this)) })) : (t = this.artistSwiper = new Swiper(e.find(".artist-swiper-container").get(0), { effect: "fade", speed: 600, observer: !0, observeParents: !0, grabCursor: !0, lazyLoading: !0, preventClicks: !1, preventClicksPropagation: !1, pagination: e.find(".swiper-pages").get(0), paginationType: "custom", paginationElement: "a", bulletClass: "swiper-item", bulletActiveClass: "on", paginationClickable: !0, nextButton: e.find(".next").get(0), prevButton: e.find(".prev").get(0), onInit: function () { n.first().addClass("on") }, onSlideChangeStart: function (e) { n.removeClass("on").eq(e.activeIndex).addClass("on") } }), n.on("click", function () { t.slideTo(n.index(this)) }))) }, setArtwork: function (n) { var i = this, l = n.find(".artwork-list-swiper-container"); isIE9 || (this.artworkSwiper = new Swiper(n.find(".artwork-list-swiper-container").get(0), { observer: !0, observeParents: !0, grabCursor: !0, slidesPerView: "auto", freeMode: !0, slidesOffsetAfter: 40, nextButton: l.find(".next").get(0), prevButton: l.find(".prev").get(0), wrapperClass: "swiper-main-wrapper", slideClass: "swiper-main-slide" })); var d, c = n.find(".artwork-detail-swiper-container"); isIE9 ? (d = this.artworkDetailSwiper = new Swiper(n.find(".artwork-detail-swiper-container").get(0), { speed: 600, grabCursor: !0, slidesPerView: 1, preventClicksPropagation: !0, mousewheelControl: !0, wrapperClass: "swiper-main-wrapper", slideClass: "swiper-main-slide", onSlideChangeStart: function () { u.data("youtubes") && t.each(u.data("youtubes"), function (e) { e.pauseVideo && e.pauseVideo() }) } }), c.find(".prev").on("click", d.swipePrev), c.find(".next").on("click", d.swipeNext)) : isIE10 || (d = this.artworkDetailSwiper = new Swiper(n.find(".artwork-detail-swiper-container").get(0), { effect: "fade", observer: !0, speed: 600, grabCursor: !0, observeParents: !0, slidesPerView: 1, preventClicksPropagation: !0, nextButton: c.find(".next").get(0), prevButton: c.find(".prev").get(0), fade: { crossFade: !0 }, mousewheelControl: !0, wrapperClass: "swiper-main-wrapper", slideClass: "swiper-main-slide", onSlideChangeStart: function () { u.data("youtubes") && t.each(u.data("youtubes"), function (e) { e.pauseVideo && e.pauseVideo() }) } })); var u = n.find(".artwork-detail-layer"), p = !1; n.find(".video").each(function () { e(this).data("video", v(this)) }), n.find(".artwork-list-swiper-container .img-area").on("click.artwork", { manager: this.manager }, function (a) { function o() { d && d.slideTo ? d.slideTo(r) : d && d.swipeTo && d.swipeTo(r), a.data.manager.disableChangeScene(), u.fadeIn(350), s(), p = !0 } var r = e(this).closest(".swiper-main-slide").data("index"); if (u.data("isLoaded")) o(); else { w.show(), e(".artwork-content-wrap").append(h); var l = u.find("iframe"); u.data("youtubes", function (t, n) { return e(t).map(function () { return v(this, n) }) }(l)), function (t) { e(t).each(function () { var t = e(this), n = t.data("src"); n && t.attr("src", n.replace(/_min(\..*)$/, "$1")) }) }(u.find("img")), u.imagesLoaded(function () { o(), w.hide(), u.data("isLoaded", !0), isIE9 ? (i.artworkDetailSwiper.reInit(), d.swipeTo(r)) : isIE10 && (d = this.artworkDetailSwiper = new Swiper(n.find(".artwork-detail-swiper-container").get(0), { observer: !0, speed: 600, grabCursor: !0, observeParents: !0, slidesPerView: 1, initialSlide: r, preventClicksPropagation: !0, nextButton: c.find(".next").get(0), prevButton: c.find(".prev").get(0), mousewheelControl: !0, wrapperClass: "swiper-main-wrapper", slideClass: "swiper-main-slide", onSlideChangeStart: function () { u.data("youtubes") && t.each(u.data("youtubes"), function (e) { e.pauseVideo && e.pauseVideo() }) } })) }) } }), n.find(".swiper-main-button.list").on("click.artwork", { manager: this.manager }, function (e) { t.each(u.data("youtubes"), function (e) { e.stopVideo && e.stopVideo() }), e.data.manager.enableChangeScene(), u.fadeOut(350), r(), p = !1 }); var f = this.getContentOfName("artwork").data, m = n.find(".audio-tit"), g = n.find(".audio-caption-scroll"), b = n.find(".audio-view iframe").data("video"), x = n.find(".audio-guide-layer"), y = x.find(".ico-global-play"), k = n.find(".audio-list-item").on("click.artwork", function () { if (e(this).hasClass("lock") || e(this).hasClass("play")) return !1; var t = e(this).data("audio-index"); k.removeClass("play"), e(this).addClass("play"), m.text(f[t].title), g.html(f[t].audio_script), b.cueVideoById(f[t].audio_guide_url), TweenMax.set(y, { opacity: 0 }), window.setTimeout(function (e) { y.trigger("click") }, 0) }); n.find(".btn-open-audio-guide").on("click.artwork", { manager: this.manager }, function (t) { if (n.find(".main-content-group").append(h), a(350), x.fadeIn(300), T && p) { var i = k.filter(function () { if (d.activeIndex) return e(this).data("audio-index") === d.activeIndex }); i.length > 0 && (k.removeClass("play"), i.trigger("click")) } else k.removeClass("play"), k.eq(0).click(); n.find(".nano").nanoScroller({ sliderMaxHeight: 46 }), t.data.manager.disableChangeScene() }), n.find(".btn-close-guide").on("click.artwork", { manager: this.manager }, function (e) { o(350), x.fadeOut(300), n.find(".nano").nanoScroller({ destroy: !0 }), p || e.data.manager.enableChangeScene(), b && b.pauseVideo && b.pauseVideo() }); var C = n.find(".password-confirm-area #audio-password"), S = n.find(".alert-popup-wrap"), T = !1, P = this.audioPwd && this.audioPwd[0] && this.audioPwd[0].pwd; n.find(".password-confirm-area .btn-shape01-color01").on("click", function () { P === C.val() ? (n.find(".password-confirm-area, .copy").remove(), k.removeClass("lock"), T = !0) : S.show() }), TweenMax.set(n.find(".img-area"), { immediateRender: !0, transformPerspective: 200, transformStyle: "preserve-3d", y: 0, rotationY: 0, rotationX: 0 }), n.find(".artwork-list-swiper-container .img-area").on("mouseover.artwork mousemove.artwork", function (t) { var n = e(this).width() / 2, i = e(this).height() / 2, a = (t.offsetX - n) / n, o = (t.offsetY - i) / i; TweenMax.to(this, .5, { immediateRender: !0, y: -25, rotationY: 5 * -a, rotationX: 5 * o, boxShadow: "8px 14px 35px rgba(68,68,68,0.5)" }) }).on("mouseout.artwork", function () { TweenMax.to(this, 1.1, { immediateRender: !0, y: 0, rotationY: 0, rotationX: 0, boxShadow: "2px 2px 30px rgba(0,0,0,.35)" }) }) }, setInformation: function (e) { this.getContentOfName("information"); var t = e.find(".sub-banner"); isIE9 || (this.subBannerSwiper = n.elEventCall(t, i.swiper.subSwiper)) }, setCommon: function () { var t = this, s = t.getContentOfName("artist"); e(document).on("click.common", ".btn-view-detail", function () { var n = e(this).closest(".txt-area-layer").addClass("on").append(h); n.css({ position: "static" }), s && (s.$el.find(".swiper-custom-pagination").hide(), t.artistSwiper && t.artistSwiper.detachEvents && t.artistSwiper.detachEvents()), n.find(".nano").nanoScroller({ sliderMaxHeight: 46 }), t.manager.disableChangeScene(), a(300) }), e(document).on("click.common", ".btn-view-detail-close", function () { var n = e(this).closest(".txt-area-layer").removeClass("on"); window.setTimeout(function () { n.css({ position: "" }) }, 450), s && (s.$el.find(".swiper-custom-pagination").show(), t.artistSwiper && t.artistSwiper.attachEvents && t.artistSwiper.attachEvents()), n.find(".nano").nanoScroller({ destroy: !0 }).removeAttr("style"), t.manager.enableChangeScene(), o(300) }), e(document).on("click.common", ".alert-popup-wrap .btn-confirm", function () { e(this).closest(".alert-popup-wrap").hide() }), n.elEventCall(".ui_toggle", i.toggleEventHandler) }, unsetCommon: function () { e(document).off("click.common") }, unsetExhibition: function (e) { }, unsetArtist: function (e) { this.artistSwiper && this.artistSwiper.destroy && this.artistSwiper.destroy() }, unsetArtwork: function (e) { this.artworkSwiper && this.artworkSwiper.destroy && this.artworkSwiper.destroy(), this.artworkDetailSwiper && this.artworkDetailSwiper.destroy && this.artworkDetailSwiper.destroy(), e.find(".artwork-list-swiper-container .img-area, .btn-close-guide,.swiper-main-button.list, .audio-list-item, .btn-open-audio-guide, .btn-close-guide, .btn-open-audio-guide").off(".artwork") }, destroy: function () { this.unsetContentsElement(); for (var e = 1, t = this.contents.length - 1; e < t; e++) { var n = this.contents[e].name; "exhibition" !== n && "artist" !== n && "artwork" !== n && "information" !== n || this.contents[e].$el.remove() } } } }(jQuery, _, window.uxlib, window.uxui), function (e, t, n, i) { function a() { var t = !e.cookie("introNoView"), n = new TimelineMax({ paused: !0, onComplete: function () { TweenMax.set(".intro", { display: "none" }), window.mainManager && mainManager.enableChangeScene() } }); new TimelineMax, new TimelineMax; if (!0 === t) { if (e(".intro").length > 0) { e(".btn-intro-no-view").on("click", function (t) { t.preventDefault(), e.cookie("introNoView", !0, { expires: 1 }), e(".btn-intro-skip").trigger("click") }), e(".btn-intro-skip").on("click", function (t) { t.preventDefault(), window.mainManager && mainManager.enableChangeScene(), e(".intro-movie").remove(), TweenMax.to(".intro", 1, { autoAlpha: 0, ease: Power2.easeOut, onComplete: function () { n.pause(), e(".intro").remove() } }) }); var i = new YT.Player(e(".intro-youtube").get(0), { enablejsapi: 1, events: { onStateChange: onIntroEnd } }); e(".intro-movie-layer").on("click.introplay", function (e) { i && i.playVideo && i.playVideo() }), e(".intro-spinner").hide(), e(".intro-movie").show(), e(".btn-skip-area").show(), window.mainManager && mainManager.disableChangeScene() } } else e(".intro-movie").remove(), TweenMax.to(".intro", 2, { autoAlpha: 0, ease: Power2.easeOut, onComplete: function () { e(".intro").remove() } }) } var o = !1; e(".main-body").length > 0 ? (window.onYouTubeIframeAPIReady = function () { if (!o) { (window.mainManager = new MainManager("#wrap")).init(), window.onIntroEnd = function (t) { 0 === t.data && e(".btn-intro-skip").trigger("click") }, a(), e(".intro-spinner").hide(), o = !0 } }, YT && 1 === YT.loaded && window.onYouTubeIframeAPIReady(), window.setTimeout(function (e) { o || window.onYouTubeIframeAPIReady() }, 5e3)) : e(".intro").length > 0 && a() }(jQuery, _, window.uxlib, window.uxui);
